# 画面仕様書 - WorldSpeakAI

## 📱 画面一覧とルーティング

```
/auth (認証関連)
├── /login           # ログイン画面
├── /signup          # 新規登録画面
└── /reset-password  # パスワードリセット画面

/ (メイン画面 - タブ構造)
├── /               # ホーム画面 (タブ1)
├── /conversation   # 会話機能 (タブ2)
│   ├── /setup     # 会話設定画面
│   └── /chat      # 会話実行画面
├── /history        # 会話履歴 (タブ3)
│   └── /[id]      # 履歴詳細画面
└── /settings       # 設定画面 (タブ4)
    ├── /profile    # プロフィール設定
    └── /subscription # サブスクリプション管理

/feedback           # 会話終了後のフィードバック画面
```

## 1. ログイン画面 (`app/auth/login.tsx`)

### 画面の目的
- ユーザーの認証
- 新規登録画面への誘導

### レイアウト構成
```
┌─────────────────────────────────────┐
│        ロゴ + アプリ名                │ 
│      「WorldSpeakAI」               │
├─────────────────────────────────────┤
│  📧 メールアドレス入力フィールド       │
│  🔒 パスワード入力フィールド          │
│      (パスワード表示/非表示トグル)     │
├─────────────────────────────────────┤
│    [ログイン] ボタン (フルワイド)      │
│                                   │
│    「パスワードを忘れた方はこちら」     │
│         (リンク、下線付き)           │
├─────────────────────────────────────┤
│  「アカウントをお持ちでない方」         │
│       [新規登録] リンク              │
└─────────────────────────────────────┘
```

### 実装で重要なポイント
- フォームバリデーション（リアルタイム）
- ローディング状態の表示
- エラーメッセージの適切な表示位置
- キーボードショートカット（Enter）対応

### 状態管理
```typescript
const [form, setForm] = useState({
  email: '',
  password: ''
});
const [errors, setErrors] = useState({});
const [isLoading, setIsLoading] = useState(false);
```

## 2. ホーム画面 (`app/(tabs)/index.tsx`)

### 画面の目的
- アプリのメインハブ
- 会話開始への誘導
- 学習状況の概要表示

### レイアウト構成
```
┌─────────────────────────────────────┐
│ 👋 こんにちは、{ユーザー名}さん      │ (ヘッダー)
│                          🔔 通知     │
├─────────────────────────────────────┤
│                                   │
│    🎤  [会話を始める]              │ (大きなメインボタン)
│       (グラデーション背景)          │
│                                   │
├─────────────────────────────────────┤
│ 📊 今日の学習状況                   │
│ ┌─────┬─────┬─────────────────┐ │
│ │今日の│総学習│   連続学習日数    │ │
│ │会話数│時間  │                 │ │
│ │  3  │ 45分 │       7日       │ │
│ └─────┴─────┴─────────────────┘ │
├─────────────────────────────────────┤
│ 🔗 クイックメニュー                 │
│ ┌─────────┬─────────┬─────────┐ │
│ │📝 設定   │📚 履歴   │💳 プラン  │ │
│ └─────────┴─────────┴─────────┘ │
└─────────────────────────────────────┘
```

### データ表示
- 今日の会話数（リアルタイム）
- 総学習時間（累計）
- 連続学習日数（ストリーク）
- 現在のサブスクリプションプラン

### インタラクション
- メインボタン → 会話設定画面へ遷移
- 統計カード → 詳細な分析画面へ（将来実装）
- クイックメニュー → 各設定画面へ

## 3. 会話設定画面 (`app/conversation/setup.tsx`)

### 画面の目的
- 会話の詳細設定
- 台本機能の前準備
- 設定のプリセット管理

### レイアウト構成
```
┌─────────────────────────────────────┐
│ ← 会話設定                    ❓ ヘルプ │ (ヘッダー)
├─────────────────────────────────────┤
│ 📚 ジャンル                        │
│ [日常会話 ▼] (ドロップダウン)        │
│                                   │
│ 🎭 シチュエーション                  │
│ [カジュアル ▼] (ドロップダウン)       │
├─────────────────────────────────────┤
│ 📊 詳細設定                        │
│                                   │
│ 難易度: [●●●○○] (スライダー)        │
│ 専門性: [●●○○○] (スライダー)        │
│                                   │
│ 会話開始者: [AI] [ユーザー] (セレクタ) │
├─────────────────────────────────────┤
│ ⚙️ UI設定                          │
│ 台本表示    [ON /OFF] (スイッチ)     │
│ 話すボタン  [ON /OFF] (スイッチ)     │
├─────────────────────────────────────┤
│ 💾 保存済み設定                     │
│ [技術会議] [面接練習] [日常会話]      │ (プリセットボタン群)
├─────────────────────────────────────┤
│    [会話を始める] (フルワイドボタン)   │
└─────────────────────────────────────┘
```

### 設定項目の詳細

#### ジャンル選択肢
- 日常会話、IT、医療、ビジネス、スポーツ、旅行、学術、法律

#### シチュエーション選択肢  
- カジュアル、会議、プレゼンテーション、面接、海外出張、技術説明、商談、学会発表

#### UI制御のロジック
- 台本表示 ON → 会話中に次に話すべき内容をガイド表示
- 話すボタン ON → ボタンで会話制御、OFF → 連続音声会話

### プリセット機能
- よく使う設定の保存
- ワンタップで設定復元
- カスタムプリセット作成

## 4. 会話画面 (`app/conversation/chat.tsx`)

### 画面の目的
- リアルタイムAI会話の実行
- 台本ガイド機能
- 音声認識と音声合成

### レイアウト構成
```
┌─────────────────────────────────────┐
│ ← IT・会議                ⏱ 05:23 │ (ヘッダー + タイマー)
├─────────────────────────────────────┤
│                                   │
│  💬 AI: こんにちは！今日は...        │ (チャットエリア)
│                                   │
│      📝 [台本] 次はこう言ってみて:    │ (台本ガイド - 色分け)
│      "Thanks for joining..."        │
│                                   │
│  💭 You: Hi everyone, let's...     │ (ユーザーの発言)
│                                   │
│  💬 AI: Great! Now let's...        │
│                                   │ (スクロール可能)
│                                   │
│                                   │
├─────────────────────────────────────┤
│ 🎤 "Listening..." (認識中テキスト)    │ (音声認識状態)
├─────────────────────────────────────┤
│ [終了]    🎤 [話す]    [ミュート]    │ (コントロールエリア)
└─────────────────────────────────────┘
```

### 音声制御の2つのモード

#### モード1: 話すボタンON
- 中央に大きな🎤ボタン
- タップして話し始め、もう一度タップで終了
- または自動で音声認識終了を検出

#### モード2: 連続会話モード  
- 常に音声を聞いている状態
- 右下に小さなミュートボタン
- 一時的にミュートして考える時間を作れる

### 台本表示の仕様
- AIメッセージと区別して表示（背景色やアイコンで差別化）
- 台本通りに話さなくても、AIが柔軟に対応
- ユーザーのレベルに応じて台本の詳細度を調整

### リアルタイム表示
- 音声認識中のテキストをリアルタイム表示
- AI思考中のローディングアニメーション
- 音声合成中の視覚的フィードバック

## 5. 会話履歴画面 (`app/(tabs)/history.tsx`)

### 画面の目的
- 過去の会話セッション一覧
- 学習進捗の確認
- 会話の再開機能

### レイアウト構成
```
┌─────────────────────────────────────┐
│ 📚 会話履歴            🔍 [検索]      │ (ヘッダー)
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │ 🏢 IT会議 - 6/29            ⏱ 15分│ │ (履歴アイテム)
│ │ 💬 18メッセージ   難易度:●●●○○     │ │
│ │ "Today's meeting agenda..." (プレビュー)
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ 🎯 面接練習 - 6/28          ⏱ 22分│ │
│ │ 💬 25メッセージ   難易度:●●○○○     │ │
│ │ "Tell me about yourself..." (プレビュー)
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ 💼 ビジネス会話 - 6/27      ⏱ 8分 │ │
│ │ 💬 12メッセージ   難易度:●●●●○     │ │
│ │ "Let's discuss the project..."  │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│            [もっと見る]              │ (ページネーション)
└─────────────────────────────────────┘
```

### 履歴アイテムの情報
- ジャンル・シチュエーションのアイコン表示
- 日時、会話時間、メッセージ数
- 設定していた難易度レベル
- 会話の最初の一言をプレビュー表示

### インタラクション
- タップで詳細画面へ
- スワイプで削除アクション（将来実装）
- 長押しで複数選択モード（将来実装）

## 6. 会話履歴詳細画面 (`app/history/[id].tsx`)

### 画面の目的
- 特定の会話の完全な再現
- 学習の振り返り
- 同じ設定での再開機能

### レイアウト構成
```
┌─────────────────────────────────────┐
│ ← IT会議 - 6/29            📤 共有   │ (ヘッダー)
├─────────────────────────────────────┤
│ ℹ️ セッション情報                    │
│ 📅 2025年6月29日 14:30-14:45        │
│ ⏱ 15分30秒 | 💬 18メッセージ        │
│ 📊 難易度:●●●○○ | 専門性:●●○○○      │
├─────────────────────────────────────┤
│                                   │
│  💬 AI: こんにちは！今日の会議の...   │ (メッセージ履歴)
│     🔊 (音声再生ボタン)              │
│     🌐 [翻訳] "Hello! Today's..."    │ (翻訳表示切り替え)
│                                   │
│  💭 You: Hi, thanks for joining...  │
│     🔊 (音声再生ボタン)              │
│     🌐 [翻訳] "こんにちは、参加して..." │
│                                   │
│  💬 AI: Great! Let's start with...  │
│     🔊 (音声再生ボタン)              │
│                                   │ (スクロール可能)
│                                   │
├─────────────────────────────────────┤
│     [同じ設定で再開] (フルワイドボタン) │
└─────────────────────────────────────┘
```

### 特別な機能
- 翻訳表示の切り替えスイッチ（上部に配置）
- 音声ファイルの再生（保存されている場合）
- 「同じ設定で再開」ボタンで設定を引き継いでダイレクトに会話開始

## 7. フィードバック画面 (`app/feedback.tsx`)

### 画面の目的
- 会話終了後の分析表示
- プラン別の機能差別化
- 次回学習への動機付け

### レイアウト構成
```
┌─────────────────────────────────────┐
│ 🎉 お疲れ様でした！           ✕ 閉じる │ (ヘッダー)
├─────────────────────────────────────┤
│ 📊 今回のセッション                  │
│ ⏱ 15分30秒 | 💬 18回発言 | 📝 240語  │
├─────────────────────────────────────┤
│                                   │
│ 🌟 今日もよく頑張りました！          │ (フリープラン)
│    継続は力なり。明日も続けましょう！  │
│                                   │
├─────────────────────────────────────┤
│ 💡 改善点とアドバイス (スタンダード+)  │
│                                   │
│ ✅ 良かった点:                      │
│ • 専門用語を適切に使えていました      │
│ • 会話の流れが自然でした            │
│                                   │
│ 📈 改善できる点:                    │
│ • "could" より "would" が適切:      │
│   "I could help" → "I would help"  │
│ • より丁寧な表現: "Please consider..." │
│                                   │
├─────────────────────────────────────┤
│ [もう一度] [履歴を見る] [ホームへ]    │ (アクションボタン)
└─────────────────────────────────────┘
```

### プラン別表示内容

#### フリープラン
- 基本統計 + 励ましメッセージのみ

#### スタンダードプラン
- 文法・語彙の具体的な改善点
- 良かった点のハイライト
- 次回の学習提案

#### プレミアムプラン（将来実装）
- 詳細な進捗チャート
- パーソナライズされた学習カリキュラム
- 長期的な成長トレンド分析

## 8. 設定画面 (`app/(tabs)/settings.tsx`)

### 画面の目的
- ユーザープロフィール管理
- アプリ設定のカスタマイズ
- サブスクリプション管理

### レイアウト構成
```
┌─────────────────────────────────────┐
│ ⚙️ 設定                             │ (ヘッダー)
├─────────────────────────────────────┤
│ 👤 プロフィール                      │
│ ┌─────────────────────────────────┐ │
│ │ 📷 [アバター画像]    ✏️ 編集     │ │
│ │ 👋 山田太郎                     │ │
│ │ 📧 taro@example.com             │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 🌍 言語設定                         │
│ 母語:       [日本語 ▼]              │
│ 学習言語:    [English ▼]             │
│ レベル:     [中級 ▼]                │
├─────────────────────────────────────┤
│ 🎨 表示設定                         │
│ テーマ:     [ライト] [ダーク] [自動]  │
│ アクセント色: [🔵] [🟢] [🟣] [🟠]    │
│ 文字サイズ:  [小] [中] [大]          │
├─────────────────────────────────────┤
│ 💳 サブスクリプション                │
│ 現在のプラン: フリープラン            │
│ [プラン管理] >                      │
├─────────────────────────────────────┤
│ 📞 サポート                         │
│ [ヘルプ] [お問い合わせ] [ログアウト]  │
└─────────────────────────────────────┘
```

## 9. サブスクリプション管理画面 (`app/settings/subscription.tsx`)

### 画面の目的
- 現在のプラン確認
- アップグレード促進
- 使用量の透明な表示

### レイアウト構成
```
┌─────────────────────────────────────┐
│ ← 💳 プラン管理                      │ (ヘッダー)
├─────────────────────────────────────┤
│ 📊 今月の使用状況                    │
│ マイク時間: ██████░░░░ 60分/60分     │
│ 会話回数:   ████░░░░░░ 8回/10回      │
├─────────────────────────────────────┤
│ 🆓 現在のプラン: フリープラン          │
│ • 月60分のマイク時間                │
│ • 1日10回の会話制限                 │
│ • 基本台本機能                     │
│ • 基本5言語対応                    │
├─────────────────────────────────────┤
│ ⭐ スタンダードプラン - ¥980/月       │
│ • 月15時間のマイク時間              │ (アップグレード)
│ • 無制限会話                      │
│ • 全機能・全言語対応               │
│ • 履歴保存・分析機能               │
│ [アップグレード]                   │
├─────────────────────────────────────┤
│ 🚀 プレミアムプラン - ¥1,980/月      │
│ • 月50時間のマイク時間              │
│ • 全Standard機能                  │
│ • AIコーチング機能                │
│ • 詳細レポート・優先サポート         │
│ [アップグレード]                   │
└─────────────────────────────────────┘
```

### 使用量表示の重要性
- リアルタイムの使用量表示
- 透明性のある制限管理
- アップグレードのタイミング提案

## 💡 claude code実装時の注意点

### 1. 状態管理の統一
```typescript
// 推奨: Zustandまたは Context + useReducer
interface AppState {
  user: User | null;
  currentConversation: Conversation | null;
  settings: UserSettings;
  subscription: SubscriptionInfo;
}
```

### 2. 共通コンポーネントの活用
```typescript
// components/ui/ 配下に配置
- Button (各種バリエーション)
- Card (情報表示用)  
- Input (フォーム用)
- Slider (設定用)
- Switch (ON/OFF切り替え)
- ProgressBar (使用量表示)
```

### 3. レスポンシブ対応
```typescript
// Mobile First でブレークポイント管理
const breakpoints = {
  sm: '640px',   // Mobile
  md: '768px',   // Tablet  
  lg: '1024px',  // Desktop
  xl: '1280px'   // Large Desktop
};
```

### 4. アクセシビリティ
- セマンティックHTML使用
- keyboard navigation対応
- screen reader対応
- color contrast確保

### 5. エラーハンドリング
```typescript
// 各画面で統一的なエラー処理
const [error, setError] = useState<string | null>(null);
const [isLoading, setIsLoading] = useState(false);

// エラーバウンダリーコンポーネントの実装
```

## 🎨 デザインシステム

### カラーパレット
```typescript
const colors = {
  primary: {
    50: '#f0f9ff',
    500: '#3b82f6', 
    900: '#1e3a8a'
  },
  success: '#10b981',
  warning: '#f59e0b', 
  error: '#ef4444',
  neutral: {
    100: '#f5f5f5',
    900: '#171717'
  }
};
```

### タイポグラフィ
```typescript
const typography = {
  h1: { fontSize: '2rem', fontWeight: 'bold' },
  h2: { fontSize: '1.5rem', fontWeight: 'semibold' },
  body: { fontSize: '1rem', lineHeight: 1.6 },
  caption: { fontSize: '0.875rem', color: 'neutral.600' }
};
```

この改善版では、claude codeが実装しやすいように以下の点を重視しました：

1. **具体的なレイアウト図**: アスキーアートで視覚的にレイアウトを表現
2. **実装に必要な技術詳細**: 状態管理、コンポーネント構造を明記
3. **プラン別機能差分**: 条件分岐で実装すべき箇所を明確化
4. **デザインシステム**: 統一的なスタイリングのガイドライン
5. **アクセシビリティ配慮**: 実装時の注意点を明記